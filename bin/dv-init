#!/bin/bash
source $(dv-path lib/common.sh) # -*-mode: sh-mode -*-

if [ -f .gitignore ]; then
    log_error "There's a .gitignore here, which suggests you won't want init"
    exit 1
fi

git init
dv-git-assert-clean

echo "# used by dv but not good to store in repo
.dv
_from_developer
_to_developer
" >> .gitignore

mkdir -p "$(dv-project-dir)/.dv"
mkdir docs
mkdir notes

git add -A
git commit -m'initial commit'

log_success "Setup complete. Consider:

$EDITOR docs/user-request.md
dv-edit-spec-create
dv-edit -p'whatever you want it to do'

"
