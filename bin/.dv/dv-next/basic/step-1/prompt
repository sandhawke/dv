Write a detailed formal specification!